<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guia de Estudos - EstudaAI</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/global.css' %}">
  <link rel="stylesheet" href="{% static 'css/descricaoTrlha.css' %}">
</head>
<body>
  <nav class="navbar">
    <div class="container navbar-content">
      <a href="{% url 'trilhas:dashboard' %}" class="navbar-brand">
        <div class="logo">üéì</div>
        <span>EstudaAI</span>
      </a>
      <ul class="navbar-menu">
        <li><a href="{% url 'trilhas:dashboard' %}">Dashboard</a></li>
        <li><a href="{% url 'trilhas:minhas_trilhas' %}">Minhas Trilhas</a></li>
        <li><a href="{% url 'trilhas:todas_trilhas' %}">Explorar</a></li>
        <li><a href="{% url 'trilha_personalizada' %}">Criar Trilha</a></li>
      </ul>
      <div class="navbar-actions">
        <div class="user-profile" onclick="toggleUserMenu()">
          <div class="user-avatar">{{ request.user.nickname|first|upper }}</div>
          <span id="userName">{{ request.user.nickname }}</span>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <div class="container-wide">
      <div class="path-hero">
        <span class="path-category">Guia de Estudos</span>
        <h1 class="path-title">Desenvolvimento Web Full Stack</h1>
        <p class="path-description">
          Um guia completo para se tornar um desenvolvedor full stack, desde os fundamentos at√© a constru√ß√£o de aplica√ß√µes completas.
        </p>
        <div class="path-stats">
          <span class="path-stat">‚è±Ô∏è 8 semanas</span>
          <span class="path-stat">üìä Intermedi√°rio</span>
          <span class="path-stat">üìö 6 etapas</span>
          <span class="path-stat">üéØ 1 projeto final</span>
        </div>
      </div>

      <div class="content-grid">
        <div class="guide-section" id="guideSection">
           Study steps will be rendered here
        </div>

        <aside class="sidebar">
          <div class="progress-card">
            <h3 class="progress-title">Seu Progresso</h3>
            <div class="progress-circle">
              <svg width="120" height="120">
                <defs>
                  <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                  </linearGradient>
                </defs>
                <circle class="progress-circle-bg" cx="60" cy="60" r="52"></circle>
                <circle class="progress-circle-fill" cx="60" cy="60" r="52"
                        stroke-dasharray="326.73"
                        stroke-dashoffset="196.04"
                        id="progressCircle"></circle>
              </svg>
              <div class="progress-text" id="progressText">35%</div>
            </div>
            <div class="progress-stats">
              <div class="progress-stat">
                <span class="progress-stat-label">Conclu√≠do</span>
                <span class="progress-stat-value" id="completedTopics">7/20 t√≥picos</span>
              </div>
              <div class="progress-stat">
                <span class="progress-stat-label">Etapa atual</span>
                <span class="progress-stat-value">Etapa 3</span>
              </div>
              <div class="progress-stat">
                <span class="progress-stat-label">Tempo estimado</span>
                <span class="progress-stat-value">5 semanas</span>
              </div>
            </div>
          </div>

          <button class="btn btn-primary" style="width: 100%; margin-bottom: 12px;">
            ‚ñ∂Ô∏è Continuar Estudando
          </button>
          <button class="btn btn-secondary" style="width: 100%;">
            üì• Baixar Guia PDF
          </button>
        </aside>
      </div>
    </div>
  </main>

  <script>
    const studySteps = [
      {
        id: 1,
        number: 'ETAPA 1',
        title: 'Fundamentos de HTML e CSS',
        description: 'Aprenda a estrutura b√°sica da web e como estilizar p√°ginas.',
        topics: [
          { id: 1, text: 'Estrutura HTML sem√¢ntica', completed: true },
          { id: 2, text: 'CSS Box Model e Flexbox', completed: true },
          { id: 3, text: 'Responsividade e Media Queries', completed: true }
        ],
        resources: ['üìñ MDN Docs', 'üé• V√≠deo aulas', 'üíª Exerc√≠cios pr√°ticos']
      },
      {
        id: 2,
        number: 'ETAPA 2',
        title: 'JavaScript Essencial',
        description: 'Domine os conceitos fundamentais de JavaScript moderno.',
        topics: [
          { id: 4, text: 'Vari√°veis, tipos e operadores', completed: true },
          { id: 5, text: 'Fun√ß√µes e arrow functions', completed: true },
          { id: 6, text: 'Arrays e m√©todos de array', completed: true },
          { id: 7, text: 'Objetos e destructuring', completed: false }
        ],
        resources: ['üìñ JavaScript.info', 'üé• Curso online', 'üß™ Desafios de c√≥digo']
      },
      {
        id: 3,
        number: 'ETAPA 3',
        title: 'DOM e Manipula√ß√£o de Eventos',
        description: 'Aprenda a tornar suas p√°ginas interativas.',
        topics: [
          { id: 8, text: 'Sele√ß√£o e manipula√ß√£o do DOM', completed: true },
          { id: 9, text: 'Event listeners e handlers', completed: false },
          { id: 10, text: 'Formul√°rios e valida√ß√£o', completed: false }
        ],
        resources: ['üìñ Documenta√ß√£o', 'üíª Projetos pr√°ticos', 'üéÆ Exerc√≠cios interativos']
      },
      {
        id: 4,
        number: 'ETAPA 4',
        title: 'APIs e Requisi√ß√µes HTTP',
        description: 'Conecte seu frontend com servi√ßos externos.',
        topics: [
          { id: 11, text: 'Fetch API e Promises', completed: false },
          { id: 12, text: 'Async/Await', completed: false },
          { id: 13, text: 'Consumindo APIs REST', completed: false },
          { id: 14, text: 'Tratamento de erros', completed: false }
        ],
        resources: ['üìñ API Docs', 'üåê APIs p√∫blicas', 'üíª Projetos com API']
      },
      {
        id: 5,
        number: 'ETAPA 5',
        title: 'Backend com Node.js',
        description: 'Construa servidores e APIs com JavaScript.',
        topics: [
          { id: 15, text: 'Introdu√ß√£o ao Node.js', completed: false },
          { id: 16, text: 'Express.js e rotas', completed: false },
          { id: 17, text: 'Middleware e autentica√ß√£o', completed: false }
        ],
        resources: ['üìñ Node.js Docs', 'üé• Tutoriais', 'üîß Ferramentas']
      },
      {
        id: 6,
        number: 'ETAPA 6',
        title: 'Banco de Dados',
        description: 'Armazene e gerencie dados de suas aplica√ß√µes.',
        topics: [
          { id: 18, text: 'SQL b√°sico', completed: false },
          { id: 19, text: 'MongoDB e NoSQL', completed: false },
          { id: 20, text: 'ORMs e integra√ß√£o', completed: false }
        ],
        resources: ['üìñ Database Docs', 'üíæ Exerc√≠cios SQL', 'üóÑÔ∏è Projetos pr√°ticos']
      }
    ];

    function renderStudySteps() {
      const container = document.getElementById('guideSection');
      const stepsHTML = studySteps.map(step => `
        <div class="study-card">
          <div class="study-header">
            <div style="flex: 1;">
              <div class="study-number">${step.number}</div>
              <div class="study-title">${step.title}</div>
            </div>
          </div>
          <div class="study-description">${step.description}</div>
          <div class="study-topics">
            ${step.topics.map(topic => `
              <div class="topic-item" onclick="toggleTopic(${topic.id})">
                <div class="topic-checkbox ${topic.completed ? 'checked' : ''}" id="topic-${topic.id}">
                  ${topic.completed ? '‚úì' : ''}
                </div>
                <div class="topic-text">${topic.text}</div>
              </div>
            `).join('')}
          </div>
          <div class="study-resources">
            ${step.resources.map(resource => `<span class="resource-tag">${resource}</span>`).join('')}
          </div>
        </div>
      `).join('');

      const projectHTML = `
        <div class="project-card">
          <span class="project-badge">üéØ PROJETO FINAL</span>
          <h2 class="project-title">Aplica√ß√£o Full Stack Completa</h2>
          <p class="project-description">
            Construa uma aplica√ß√£o web completa do zero, aplicando todos os conceitos aprendidos durante o guia de estudos.
          </p>

          <div class="project-section">
            <h3 class="project-section-title">üéØ Objetivos</h3>
            <ul class="project-list">
              <li>Criar uma interface responsiva e moderna</li>
              <li>Implementar autentica√ß√£o de usu√°rios</li>
              <li>Desenvolver uma API RESTful completa</li>
              <li>Integrar com banco de dados</li>
              <li>Deploy da aplica√ß√£o em produ√ß√£o</li>
            </ul>
          </div>

          <div class="project-section">
            <h3 class="project-section-title">üí° Sugest√µes de Projeto</h3>
            <ul class="project-list">
              <li>Sistema de gerenciamento de tarefas (To-Do App avan√ßado)</li>
              <li>Plataforma de blog com coment√°rios e curtidas</li>
              <li>E-commerce simplificado com carrinho de compras</li>
              <li>Rede social minimalista</li>
              <li>Dashboard de an√°lise de dados</li>
            </ul>
          </div>

          <div class="project-section">
            <h3 class="project-section-title">üõ†Ô∏è Tecnologias Recomendadas</h3>
            <ul class="project-list">
              <li>Frontend: HTML, CSS, JavaScript (ou React)</li>
              <li>Backend: Node.js com Express</li>
              <li>Banco de Dados: MongoDB ou PostgreSQL</li>
              <li>Autentica√ß√£o: JWT ou OAuth</li>
              <li>Deploy: Vercel, Heroku ou Railway</li>
            </ul>
          </div>

          <div class="project-section">
            <h3 class="project-section-title">üìã Requisitos M√≠nimos</h3>
            <ul class="project-list">
              <li>Interface responsiva para mobile e desktop</li>
              <li>Pelo menos 4 rotas/p√°ginas diferentes</li>
              <li>CRUD completo (Create, Read, Update, Delete)</li>
              <li>Valida√ß√£o de dados no frontend e backend</li>
              <li>Tratamento de erros adequado</li>
              <li>C√≥digo organizado e documentado</li>
            </ul>
          </div>

          <button class="btn btn-primary" style="margin-top: 24px;">
            üöÄ Come√ßar Projeto
          </button>
        </div>
      `;

      container.innerHTML = stepsHTML + projectHTML;
    }

    function toggleTopic(topicId) {
      event.stopPropagation();
      const checkbox = document.getElementById(`topic-${topicId}`);
      const isCompleted = checkbox.classList.contains('checked');

      if (isCompleted) {
        checkbox.classList.remove('checked');
        checkbox.textContent = '';
      } else {
        checkbox.classList.add('checked');
        checkbox.textContent = '‚úì';
      }

      updateProgress();
    }

    function updateProgress() {
      const allTopics = studySteps.reduce((sum, step) => sum + step.topics.length, 0);
      const completedTopics = document.querySelectorAll('.topic-checkbox.checked').length;
      const percentage = Math.round((completedTopics / allTopics) * 100);

      document.getElementById('progressText').textContent = percentage + '%';
      document.getElementById('completedTopics').textContent = `${completedTopics}/${allTopics} t√≥picos`;

      const circumference = 326.73;
      const offset = circumference - (percentage / 100) * circumference;
      document.getElementById('progressCircle').style.strokeDashoffset = offset;
    }

    function toggleUserMenu() {
      if (confirm('Deseja sair?')) {
        localStorage.removeItem('user');
        window.location.href = 'index.html';
      }
    }

    const user = JSON.parse(localStorage.getItem('user') || '{}');
    if (user.name) {
      document.getElementById('userName').textContent = user.name;
      document.querySelector('.user-avatar').textContent = user.name.charAt(0).toUpperCase();
    }

    renderStudySteps();
  </script>
</body>
</html>
